+-------------------------------------------------------------------------------------------+
|                                   АРХИТЕКТУРА BOOKWORM                                    |
+-------------------------------------------------------------------------------------------+

+-----------------------------------+     +-----------------------------------+
|       ПОЛЬЗОВАТЕЛЬСКИЙ СЛОЙ       |     |                                   |
|           (VIEW LAYER)            |     |                                   |
+-----------------------------------+     |                                   |
|                                   |     |                                   |
|  +-------------+  +-------------+ |     |                                   |
|  | Активности  |  |  Фрагменты  | |     |                                   |
|  +-------------+  +-------------+ |     |                                   |
|  | MainActivity|  | HomeFragment| |     |          ПОТОК ДАННЫХ            |
|  | SignInActivity| LibraryFragment| <---+        И ВЗАИМОДЕЙСТВИЯ          |
|  | SingUpActivity| ShelvesFragment|     |                                   |
|  | BookActivity|  | ProfileFragment <---+                                   |
|  | BookReaderActivity              |     |                                   |
|  | AddBookActivity                 |     |                                   |
|  | EditBookActivity                |     |                                   |
|  | ShelfDetailActivity             |     |                                   |
|  | PersonalDataActivity            |     |                                   |
|  | SettingsActivity                |     |                                   |
|  | FilePickerActivity              |     |                                   |
|  +-------------+  +-------------+ |     |                                   |
+----------------+------------------+     |                                   |
         ↓               ↓                |                                   |
+-----------------------------------+     |                                   |
|     СЛОЙ БИЗНЕС-ЛОГИКИ (MVC)     |     |                                   |
|        (CONTROLLER LAYER)        | <---+                                   |
+-----------------------------------+     |                                   |
| - Обработка пользовательских     |     |                                   |
|   действий                       |     |                                   |
| - Координация потоков данных     |     |                                   |
| - Маршрутизация между экранами   |     |                                   |
| - Алгоритмы отображения книг     |     |                                   |
| - Обработка жестов при чтении    |     |                                   |
+-----------------------------------+     |                                   |
                  ↓                       |                                   |
+-----------------------------------+     |                                   |
|         РЕПОЗИТОРНЫЙ СЛОЙ         | <---+                                   |
+-----------------------------------+     |                                   |
| - Абстракция доступа к данным     |     |                                   |
| - Кэширование                     |     |                                   |
| - Синхронизация с сервером        |     |                                   |
| - Поддержка офлайн-режима         |     |                                   |
+-----------------------------------+     |                                   |
                  ↓                       |                                   |
+-----------------------------------+     |                                   |
|          СЕРВИСНЫЙ СЛОЙ           | <---+                                   |
+-----------------------------------+     |                                   |
| +---------------+ +---------------+|     |                                   |
| | SupabaseAuth  | | SupabaseService||    |                                   |
| +---------------+ +---------------+|     |                                   |
| | - Аутентификация| - API запросы  ||    |                                   |
| | - Токены доступа| - CRUD операции||    |                                   |
| | - Авторизация  | - Обработка JSON||    |                                   |
| +---------------+ +---------------+|     |                                   |
+-----------------------------------+     |                                   |
                  ↓                       |                                   |
+-----------------------------------+     |                                   |
|          СЛОЙ ДАННЫХ (MODEL)      | <---+                                   |
+-----------------------------------+     |                                   |
| +-------+ +------+ +------+ +------+ |  |                                   |
| | Book  | | Quote| | Shelf| | TocItem| |  |                                   |
| +-------+ +------+ +------+ +------+ |  |                                   |
| | Данные книги   | | Книжные полки  | |  |                                   |
| | - Название     | | - Название     | |  |                                   |
| | - Автор        | | - Описание     | |  |                                   |
| | - Файл         | | - Список книг  | |  |                                   |
| | - Прогресс     | | - Статистика   | |  |                                   |
| +----------------+ +----------------+ |  |                                   |
+-----------------------------------+     +-----------------------------------+
                  ↓                       
+-----------------------------------+     
|         ВНЕШНИЕ СЕРВИСЫ           |     
+-----------------------------------+     
| +---------------------------+     |     
| |   Supabase Platform       |     |     
| +---------------------------+     |     
| | - Database                |     |     
| | - Authentication          |     |     
| | - Storage                 |     |     
| +---------------------------+     |     
+-----------------------------------+     
``` 